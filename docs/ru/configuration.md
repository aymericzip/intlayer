# Intlayer Конфигурационная Документация

## Обзор

Файлы конфигурации Intlayer позволяют настраивать различные аспекты плагина, такие как интернационализация, промежуточные программы и обработка контента. Этот документ предоставляет детальное описание каждого свойства в конфигурации.

---

## Поддержка файлов конфигурации

Intlayer принимает форматы файлов конфигурации JSON, JS, MJS и TS:

- `intlayer.config.ts`
- `intlayer.config.js`
- `intlayer.config.json`
- `intlayer.config.cjs`
- `intlayer.config.mjs`
- `.intlayerrc`

---

## Пример файла конфигурации

```typescript fileName="intlayer.config.ts" codeFormat="typescript"
import { Locales, type IntlayerConfig } from "intlayer";

const config: IntlayerConfig = {
  internationalization: {
    locales: [Locales.RUSSIAN],
  },
  content: {
    typesDir: "content/types",
  },
  middleware: {
    noPrefix: false,
  },
};

export default config;
```

```javascript fileName="intlayer.config.cjs" codeFormat="commonjs"
const { Locales } = require("intlayer");

/** @type {import('intlayer').IntlayerConfig} */
const config = {
  internationalization: {
    locales: [Locales.RUSSIAN],
  },
  content: {
    typesDir: "content/types",
  },
  middleware: {
    noPrefix: false,
  },
};

module.exports = config;
```

```json5 fileName=".intlayerrc" codeFormat="json"
{
  "internationalization": {
    "locales": ["ru"],
  },
  "content": {
    "typesDir": "content/types",
  },
  "middleware": {
    "noPrefix": false,
  },
}
```

---

## Справочник конфигурации

Следующие разделы описывают различные настройки конфигурации, доступные для Intlayer.

---

### Конфигурация интернационализации

Определяет настройки, связанные с интернационализацией, включая доступные локали и локаль по умолчанию для приложения.

#### Свойства

- **locales**:
  - _Тип_: `string[]`
  - _По умолчанию_: `['ru']`
  - _Описание_: Список поддерживаемых локалей в приложении.
  - _Пример_: `['ru', 'fr', 'es']`
- **strictMode**:

  - _Тип_: `string`
  - _По умолчанию_: `required_only`
  - _Описание_: Обеспечить строгую реализацию интернационализированного контента с использованием TypeScript.
  - _Примечание_: Если установлено на "strict", функция перевода `t` потребует от каждой объявленной локали быть определенной. Если одна локаль отсутствует или если локаль не объявлена в вашей конфигурации, это вызовет ошибку.
  - _Примечание_: Если установлено на "required_only", функция перевода `t` потребует от каждой объявленной локали быть определенной. Если одна локаль отсутствует, это вызовет предупреждение. Но будет принято, если локаль не объявленная в вашей конфигурации, но существует.
  - _Примечание_: Если установлено на "loose", функция перевода `t` примет любую существующую локаль.

- **defaultLocale**:
  - _Тип_: `string`
  - _По умолчанию_: `'ru'`
  - _Описание_: Локаль по умолчанию, используемая в качестве резервной, если запрашиваемая локаль не найдена.
  - _Пример_: `'ru'`
  - _Примечание_: Это используется для определения локали, когда ни одна не указана в URL, cookie или заголовке.

---

### Конфигурация редактора

Определяет настройки, связанные с интегрированным редактором, включая порт сервера и активный статус.

#### Свойства

- **backendURL**:

  - _Тип_: `string`
  - _По умолчанию_: `https://back.intlayer.org`
  - _Описание_: URL сервера бэкенда.
  - _Пример_: `http://localhost:4000`

- **enabled**:

  - _Тип_: `boolean`
  - _По умолчанию_: `true`
  - _Описание_: Указывает, активен ли редактор.
  - _Пример_: `true`
  - _Примечание_: Может быть установлен с помощью NODE_ENV или другой специальной переменной окружения.

- **clientId**:

  - _Тип_: `string` | `undefined`
  - _По умолчанию_: `undefined`
  - _Описание_: clientId и clientSecret позволяют пакетам intlayer аутентифицироваться с бэкендом, используя аутентификацию oAuth2. Токен доступа используется для аутентификации пользователя, связанного с проектом. Чтобы получить токен доступа, перейдите на https://intlayer.org/dashboard/project и создайте учетную запись.
  - _Пример_: `true`
  - _Примечание_: Важно: clientId и clientSecret должны быть тайными и не подлежать публичному распространению. Пожалуйста, убедитесь, что они хранятся в безопасном месте, например в переменных окружения.

- **clientSecret**:
  - _Тип_: `string` | `undefined`
  - _По умолчанию_: `undefined`
  - _Описание_: clientId и clientSecret позволяют пакетам intlayer аутентифицироваться с бэкендом, используя аутентификацию oAuth2. Токен доступа используется для аутентификации пользователя, связанного с проектом. Чтобы получить токен доступа, перейдите на https://intlayer.org/dashboard/project и создайте учетную запись.
  - _Пример_: `true`
  - _Примечание_: Важно: clientId и clientSecret должны быть тайными и не подлежать публичному распространению. Пожалуйста, убедитесь, что они хранятся в безопасном месте, например в переменных окружения.

### Конфигурация промежуточного ПО

Настройки, которые контролируют поведение промежуточного ПО, включая то, как приложение обрабатывает cookie, заголовки и префиксы URL для управления локалями.

#### Свойства

- **headerName**:
  - _Тип_: `string`
  - _По умолчанию_: `'x-intlayer-locale'`
  - _Описание_: Имя HTTP-заголовка, используемого для определения локали.
  - _Пример_: `'x-custom-locale'`
  - _Примечание_: Это полезно для определения локали на основе API.
- **cookieName**:
  - _Тип_: `string`
  - _По умолчанию_: `'intlayer-locale'`
  - _Описание_: Имя cookie, используемого для хранения локали.
  - _Пример_: `'custom-locale'`
  - _Примечание_: Используется для сохранения локали между сессиями.
- **prefixDefault**:
  - _Тип_: `boolean`
  - _По умолчанию_: `true`
  - _Описание_: Нужен ли префикс локали по умолчанию в URL.
  - _Пример_: `false`
  - _Примечание_: Если `false`, URL для локали по умолчанию не будет иметь префикса локали.
- **basePath**:
  - _Тип_: `string`
  - _По умолчанию_: `''`
  - _Описание_: Базовый путь для URL приложения.
  - _Пример_: `'/my-app'`
  - _Примечание_: Это влияет на то, как строятся URL для приложения.
- **serverSetCookie**:
  - _Тип_: `string`
  - _По умолчанию_: `'always'`
  - _Описание_: Правило для установки cookie локали на сервере.
  - _Опции_: `'always'`, `'never'`
  - _Пример_: `'never'`
  - _Примечание_: Управляет тем, устанавливается ли cookie локали при каждом запросе или никогда.
- **noPrefix**:
  - _Тип_: `boolean`
  - _По умолчанию_: `false`
  - _Описание_: Следует ли опустить префикс локали из URL.
  - _Пример_: `true`
  - _Примечание_: Если `true`, URL не будут содержать информацию о локали.

---

### Конфигурация контента

Настройки, связанные с обработкой контента в приложении, включая названия каталогов, расширения файлов и производные конфигурации.

#### Свойства

- **watch**:
  - _Тип_: `boolean`
  - _По умолчанию_: `process.env.NODE_ENV === 'development'`
  - _Описание_: Указывает, должен ли Intlayer следить за изменениями в файлах декларации контента в приложении для пересборки связанных словарей.
- **fileExtensions**:
  - _Тип_: `string[]`
  - _По умолчанию_: `['.content.ts', '.content.js', '.content.cjs', '.content.mjs', '.content.json', '.content.tsx', '.content.jsx']`
  - _Описание_: Расширения файлов для поиска при построении словарей.
  - _Пример_: `['.data.ts', '.data.js', '.data.json']`
  - _Примечание_: Настройка расширений файлов может помочь избежать конфликтов.
- **baseDir**:
  - _Тип_: `string`
  - _По умолчанию_: `process.cwd()`
  - _Описание_: Базовый каталог для проекта.
  - _Пример_: `'/path/to/project'`
  - _Примечание_: Это используется для разрешения всех директорий, связанных с Intlayer.
- **dictionaryOutput**:
  - _Тип_: `string[]`
  - _По умолчанию_: `['intlayer']`
  - _Описание_: Тип выходного словаря для использования, например, `'intlayer'` или `'i18next'`.
- **contentDirName**:
  - _Тип_: `string`
  - _По умолчанию_: `'src'`
  - _Описание_: Имя директории, где хранится контент.
  - _Пример_: `'data'`, `'content'`, `'locales'`
  - _Примечание_: Если не на уровне базовой директории, обновите `contentDir`.
- **contentDir**:

  - _Тип_: `string`
  - _ПроизводнаяОт_: `'baseDir'` / `'contentDirName'`
  - _Описание_: Путь к директории, где хранится контент.

- **resultDirName**:
  - _Тип_: `string`
  - _По умолчанию_: `'.intlayer'`
  - _Описание_: Имя директории, где хранятся результаты.
  - _Пример_: `'outputOFIntlayer'`
  - _Примечание_: Если эта директория не на базовом уровне, обновите `resultDir`.
- **resultDir**:

  - _Тип_: `string`
  - _ПроизводнаяОт_: `'baseDir'` / `'resultDirName'`
  - _Описание_: Путь к директории для хранения промежуточных или выходных результатов.

- **moduleAugmentationDirName**:

  - _Тип_: `string`
  - _По умолчанию_: `'types'`
  - _Описание_: Директория для расширения модуля, позволяющая лучшее предложение IDE и проверку типов.
  - _Пример_: `'intlayer-types'`
  - _Примечание_: Не забудьте включить это в `tsconfig.json`.

- **moduleAugmentationDir**:

  - _Тип_: `string`
  - _ПроизводнаяОт_: `'baseDir'` / `'moduleAugmentationDirName'`
  - _Описание_: Путь для расширения модуля и дополнительных определений типов.

- **dictionariesDirName**:
  - _Тип_: `string`
  - _По умолчанию_: `'dictionary'`
  - _Описание_: Директория для хранения словарей.
  - _Пример_: `'translations'`
  - _Примечание_: Если не на уровне директории результатов, обновите `dictionariesDir`.
- **dictionariesDir**:

  - _Тип_: `string`
  - _ПроизводнаяОт_: `'resultDir'` / `'dictionariesDirName'`
  - _Описание_: Директория для хранения локализационных словарей.

- **i18nextResourcesDirName**:
  - _Тип_: `string`
  - _По умолчанию_: `'i18next_dictionary'`
  - _Описание_: Директория для хранения i18n словарей.
  - _Пример_: `'translations'`
  - _Примечание_: Если не на уровне директории результатов, обновите `i18nextResourcesDir`.
  - _Примечание_: Убедитесь, что выходные данные i18n словарей включают i18next для построения словарей для i18next.
- **i18nextResourcesDir**:

  - _Тип_: `string`
  - _ПроизводнаяОт_: `'resultDir'` / `'i18nextResourcesDirName'`
  - _Описание_: Директория для хранения i18n словарей.
  - _Примечание_: Убедитесь, что эта директория настроена для типа выходных данных i18next.

- **typeDirName**:

  - _Тип_: `string`
  - _По умолчанию_: `'types'`
  - _Описание_: Директория для хранения типов словарей.
  - _Пример_: `'intlayer-types'`
  - _Примечание_: Если не на уровне директории результатов, обновите `typesDir`.

- **typesDir**:

  - _Тип_: `string`
  - _ПроизводнаяОт_: `'resultDir'` / `'typeDirName'`
  - _Описание_: Директория для хранения типов словарей.

- **mainDirName**:
  - _Тип_: `string`
  - _По умолчанию_: `'main'`
  - _Описание_: Директория для хранения основных файлов.
  - _Пример_: `'intlayer-main'`
  - _Примечание_: Если не на уровне директории результатов, обновите `mainDir`.
- **mainDir**:
  - _Тип_: `string`
  - _ПроизводнаяОт_: `'resultDir'` / `'mainDirName'`
  - _Описание_: Директория, где хранятся основные файлы приложения.
- **excludedPath**:
  - _Тип_: `string[]`
  - _По умолчанию_: `['node_modules']`
  - _Описание_: Директории, исключенные из поиска контента.
  - _Примечание_: Эта настройка еще не используется, но запланирована для будущей реализации.

### Конфигурация логгера

Настройки, которые контролируют логгер, включая уровень логирования и префикс для использования.

#### Свойства

- **enabled**:
  - _Тип_: `boolean`
  - _По умолчанию_: `true`
  - _Описание_: Указывает, включен ли логгер.
  - _Пример_: `true`
  - _Примечание_: Может быть установлен с помощью NODE_ENV или другой специальной переменной окружения.
- **level**:
  - _Тип_: `'info' | 'warn' | 'debug' | 'log'`
  - _По умолчанию_: `'log'`
  - _Описание_: Уровень логгера.
  - _Пример_: `'info'`
  - _Примечание_: Уровень логгера. Он может быть 'log', 'info', 'warn', 'error' или 'debug'.
- **prefix**:
  - _Тип_: `string`
  - _По умолчанию_: `'[intlayer] '`
  - _Описание_: Префикс логгера.
  - _Пример_: `'[мой пользовательский префикс] '`
  - _Примечание_: Префикс логгера.
