# كيفية عمل Intlayer

## نظرة عامة

دور Intlayer هو تفسير ملفات إعلان محتوى JavaScript إلى قواميس.

لذلك، يمر Intlayer بعدة خطوات:

1. إعلان ملفات المحتوى

   - يمكن تعريف ملفات المحتوى بصيغ مختلفة، مثل TypeScript أو ECMAScript أو CommonJS أو JSON.
   - يمكن تعريف ملفات المحتوى في أي مكان في المشروع، مما يسمح بتحسين الصيانة وقابلية التوسع. من المهم احترام تقاليد امتداد الملفات لملفات المحتوى. هذا الامتداد هو افتراضيًا `*.content.{js|cjs|mjs|ts|tsx|json}`، ولكن يمكن تغييره في [ملف التكوين](https://github.com/aymericzip/intlayer/blob/main/docs/ar/configuration.md).

2. إنشاء القواميس

   - يتم إنشاء القواميس من ملفات المحتوى. بشكل افتراضي، يتم إنشاء قواميس intlayer في دليل `.intlayer/dictionary` الخاص بالمشروع.
   - يمكن إنشاء نوعين من القواميس: قواميس intlayer وقواميس i18n (بيتا).

3. إنشاء أنواع القواميس

   - يتم إنشاء أنواع القواميس من قواميس intlayer. بشكل افتراضي، يتم إنشاء أنواع قواميس intlayer في دليل `.intlayer/types` الخاص بالمشروع.

4. إنشاء تعزيز وحدة Intlayer

   - تعزيز وحدة Intlayer [module augmentation](https://www.typescriptlang.org/docs/handbook/declaration-merging.html) هو ميزة TypeScript التي تتيح لك تحديد أنواع إضافية لـ Intlayer. هذا يجعل تجربة التطوير أسهل من خلال اقتراح المعطيات المتاحة أو المعطيات المطلوبة.
     من بين الأنواع المولدة، تمت إضافة أنواع قواميس intlayer أو حتى أنواع تكوين اللغة إلى ملف `types/intlayer.d.ts`، وتستخدمه حزم أخرى. للقيام بذلك، من الضروري أن يتم تكوين ملف `tsconfig.json` ليشمل دليل `.intlayer/types` الخاص بالمشروع.

5. مراقبة ملف المحتوى

   - يتم مراقبة ملفات المحتوى لإعادة إنشائها في كل مرة يتم تعديلها.

6. تفسير القاموس
   - يتم تفسير القواميس أخيرًا لاستخدامها في التطبيقات.

## الحزم

يتكون Intlayer من عدة حزم، لكل منها دور محدد في عملية الترجمة. إليك تمثيل رسومي لبنية هذه الحزمة:

![حزم intlayer](https://github.com/aymericzip/intlayer/blob/main/docs/assets/packages_dependency_graph.svg)

### intlayer

تستخدم حزمة `intlayer` في التطبيقات لإعلان المحتوى في ملفات المحتوى.

### react-intlayer

تستخدم حزمة `react-intlayer` لتفسير قواميس intlayer وجعلها قابلة للاستخدام في تطبيقات React.

### next-intlayer

تستخدم حزمة `next-intlayer` كطبقة فوق `react-intlayer` لجعل قواميس intlayer قابلة للاستخدام في تطبيقات Next.js. إنها تدمج ميزات أساسية لجعل Intlayer يعمل في بيئة Next.js، مثل برنامج الترجمة الوسيطة، والتوجيه، أو تكوين ملف `next.config.js`.

### intlayer-editor

تستخدم حزمة `intlayer-editor` للسماح باستخدام المحرر المرئي. يمكن تثبيت هذه الحزمة، الاختيارية، في التطبيقات وستستخدمها حزمة `react-intlayer`.
تتكون من جزءين: الخادم والعميل.

يحتوي العميل على عناصر واجهة المستخدم التي ستستخدمها `react-intlayer`.

الخادم، المعتمد على Express، يستخدم لاستقبال طلبات المحرر المرئي وإدارة أو تعديل ملفات المحتوى.

### intlayer-cli

يمكن استخدام حزمة `intlayer-cli` لإنشاء القواميس باستخدام الأمر `npx intlayer build`. إذا كانت `intlayer` مثبتة بالفعل، يتم تثبيت الـ CLI تلقائيًا ولا تكون هذه الحزمة ضرورية.

### @intlayer/core

حزمة `@intlayer/core` هي الحزمة الرئيسية لـ Intlayer. تحتوي على وظائف إدارة الترجمة والقواميس. `@intlayer/core` متعددة المنصات وتستخدمها حزم أخرى لأداء تفسير القواميس.

### @intlayer/config

تستخدم حزمة `@intlayer/config` لتكوين إعدادات Intlayer، مثل اللغات المتاحة، ومعلمات برنامج الترجمة الوسيطة في Next.js أو إعدادات المحرر المدمج.

### @intlayer/webpack

تستخدم حزمة `@intlayer/webpack` لإضافة إضافات الترجمة إلى Next.js وReact.

### @intlayer/cli

تستخدم حزمة `@intlayer/cli` لضمان اتساق جميع أوامر CLI لـ intlayer.

### @intlayer/dictionaries-entry

تعتبر حزمة `@intlayer/dictionaries-entry` حزمة تُرجع فقط مسار الإدخال لقواميس intlayer. نظرًا لأن البحث في نظام الملفات مستحيل من المتصفح، فإن استخدام المجمّعات مثل Webpack أو Rollup لاسترداد مسار الإدخال للقواميس ليس ممكنًا. تهدف هذه الحزمة إلى أن تكون مقلدة.

### @intlayer/chokidar

تستخدم حزمة `@intlayer/chokidar` لمراقبة ملفات المحتوى وإعادة إنشاء القاموس المعدل عند كل تعديل.
