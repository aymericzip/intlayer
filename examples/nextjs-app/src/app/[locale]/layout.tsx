import {
  getHTMLTextDir,
  getHTMLLang,
  type IConfigLocales,
  getTranslationContent,
} from 'intlayer';
import type { Metadata } from 'next';
import { Inter } from 'next/font/google';
import type { LocalParams, NextLayoutIntlayer } from 'next-intlayer';

const inter = Inter({ subsets: ['latin'] });

export { generateStaticParams } from 'next-intlayer';

export const generateMetadata = ({
  params: { locale },
}: LocalParams): Metadata => {
  const t = <T extends string>(content: IConfigLocales<T>) =>
    getTranslationContent(content, locale);

  const title = t<string>({
    en: 'Create Next App',
    fr: 'Créer une application Next.js',
    es: 'Crear una aplicación Next.js',
  });

  const description = t({
    en: 'Generated by create next app',
    fr: 'Généré par create next app',
    es: 'Generado por create next app',
  });

  return {
    title,
    description,
  };
};

const LocaleLayout: NextLayoutIntlayer = ({ children, params: { locale } }) => (
  <html lang={getHTMLLang(locale)} dir={getHTMLTextDir(locale)}>
    <body className={inter.className}>{children}</body>
  </html>
);

export default LocaleLayout;
